{"ast":null,"code":"import React,{useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import{QueryClient,QueryClientProvider}from'react-query';import{Toaster}from'react-hot-toast';import{ThemeProvider,CssBaseline,Box,createTheme}from'@mui/material';import Layout from'./components/Layout/Layout';import ProtectedRoute from'./components/Auth/ProtectedRoute';import LoadingSpinner from'./components/Common/LoadingSpinner';// Pages\nimport LoginPage from'./pages/Auth/LoginPage';import DashboardPage from'./pages/Dashboard/DashboardPage';import ModulesPage from'./pages/Modules/ModulesPage';import AnalysisPage from'./pages/Analysis/AnalysisPage';import AlertsPage from'./pages/Alerts/AlertsPage';import SettingsPage from'./pages/Settings/SettingsPage';import AdminPage from'./pages/Admin/AdminPage';import NotFoundPage from'./pages/NotFound/NotFoundPage';// Store\nimport{useAuthStore}from'./store/authStore';// Create a theme instance\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const theme=createTheme({palette:{primary:{main:'#1976d2',light:'#42a5f5',dark:'#1565c0'},secondary:{main:'#dc004e',light:'#ff5983',dark:'#9a0036'},background:{default:'#f5f5f5',paper:'#ffffff'}},typography:{fontFamily:'\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',h1:{fontSize:'2.5rem',fontWeight:600},h2:{fontSize:'2rem',fontWeight:600},h3:{fontSize:'1.75rem',fontWeight:500},h4:{fontSize:'1.5rem',fontWeight:500},h5:{fontSize:'1.25rem',fontWeight:500},h6:{fontSize:'1rem',fontWeight:500}},components:{MuiButton:{styleOverrides:{root:{textTransform:'none',borderRadius:8}}},MuiCard:{styleOverrides:{root:{borderRadius:12,boxShadow:'0 2px 8px rgba(0,0,0,0.1)'}}},MuiPaper:{styleOverrides:{root:{borderRadius:12}}}}});// Create a client\nconst queryClient=new QueryClient({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:false,staleTime:5*60*1000// 5 minutes\n}}});function App(){const{isAuthenticated,isLoading,refreshAuth}=useAuthStore();// Check for existing tokens on app load\nuseEffect(()=>{const accessToken=localStorage.getItem('access_token');const refreshToken=localStorage.getItem('refresh_token');if(accessToken&&refreshToken&&!isAuthenticated){refreshAuth();}},[refreshAuth,isAuthenticated]);if(isLoading){return/*#__PURE__*/_jsxs(ThemeProvider,{theme:theme,children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",minHeight:\"100vh\",children:/*#__PURE__*/_jsx(LoadingSpinner,{size:60})})]});}return/*#__PURE__*/_jsx(QueryClientProvider,{client:queryClient,children:/*#__PURE__*/_jsxs(ThemeProvider,{theme:theme,children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:isAuthenticated?/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true}):/*#__PURE__*/_jsx(LoginPage,{})}),/*#__PURE__*/_jsxs(Route,{path:\"/\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Layout,{})}),children:[/*#__PURE__*/_jsx(Route,{index:true,element:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"dashboard\",element:/*#__PURE__*/_jsx(DashboardPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"modules\",element:/*#__PURE__*/_jsx(ModulesPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"analysis\",element:/*#__PURE__*/_jsx(AnalysisPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"alerts\",element:/*#__PURE__*/_jsx(AlertsPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"settings\",element:/*#__PURE__*/_jsx(SettingsPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"admin\",element:/*#__PURE__*/_jsx(AdminPage,{})})]}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(NotFoundPage,{})})]})}),/*#__PURE__*/_jsx(Toaster,{position:\"top-right\",toastOptions:{duration:4000,style:{background:'#363636',color:'#fff'},success:{duration:3000,iconTheme:{primary:'#4caf50',secondary:'#fff'}},error:{duration:5000,iconTheme:{primary:'#f44336',secondary:'#fff'}}}})]})});}export default App;","map":{"version":3,"names":["React","useEffect","BrowserRouter","Router","Routes","Route","Navigate","QueryClient","QueryClientProvider","Toaster","ThemeProvider","CssBaseline","Box","createTheme","Layout","ProtectedRoute","LoadingSpinner","LoginPage","DashboardPage","ModulesPage","AnalysisPage","AlertsPage","SettingsPage","AdminPage","NotFoundPage","useAuthStore","jsx","_jsx","jsxs","_jsxs","theme","palette","primary","main","light","dark","secondary","background","default","paper","typography","fontFamily","h1","fontSize","fontWeight","h2","h3","h4","h5","h6","components","MuiButton","styleOverrides","root","textTransform","borderRadius","MuiCard","boxShadow","MuiPaper","queryClient","defaultOptions","queries","retry","refetchOnWindowFocus","staleTime","App","isAuthenticated","isLoading","refreshAuth","accessToken","localStorage","getItem","refreshToken","children","display","justifyContent","alignItems","minHeight","size","client","path","element","to","replace","index","position","toastOptions","duration","style","color","success","iconTheme","error"],"sources":["C:/AquaTrak-Project/src/frontend/src/App.tsx"],"sourcesContent":["import React, { Suspense, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport { QueryClient, QueryClientProvider } from 'react-query';\nimport { Toaster } from 'react-hot-toast';\nimport { ThemeProvider, CssBaseline, Box, createTheme } from '@mui/material';\n\nimport Layout from './components/Layout/Layout';\nimport ProtectedRoute from './components/Auth/ProtectedRoute';\nimport LoadingSpinner from './components/Common/LoadingSpinner';\n\n// Pages\nimport LoginPage from './pages/Auth/LoginPage';\nimport DashboardPage from './pages/Dashboard/DashboardPage';\nimport ModulesPage from './pages/Modules/ModulesPage';\nimport AnalysisPage from './pages/Analysis/AnalysisPage';\nimport AlertsPage from './pages/Alerts/AlertsPage';\nimport SettingsPage from './pages/Settings/SettingsPage';\nimport AdminPage from './pages/Admin/AdminPage';\nimport NotFoundPage from './pages/NotFound/NotFoundPage';\n\n// Store\nimport { useAuthStore } from './store/authStore';\n\n// Create a theme instance\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#1976d2',\n      light: '#42a5f5',\n      dark: '#1565c0',\n    },\n    secondary: {\n      main: '#dc004e',\n      light: '#ff5983',\n      dark: '#9a0036',\n    },\n    background: {\n      default: '#f5f5f5',\n      paper: '#ffffff',\n    },\n  },\n  typography: {\n    fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\n    h1: {\n      fontSize: '2.5rem',\n      fontWeight: 600,\n    },\n    h2: {\n      fontSize: '2rem',\n      fontWeight: 600,\n    },\n    h3: {\n      fontSize: '1.75rem',\n      fontWeight: 500,\n    },\n    h4: {\n      fontSize: '1.5rem',\n      fontWeight: 500,\n    },\n    h5: {\n      fontSize: '1.25rem',\n      fontWeight: 500,\n    },\n    h6: {\n      fontSize: '1rem',\n      fontWeight: 500,\n    },\n  },\n  components: {\n    MuiButton: {\n      styleOverrides: {\n        root: {\n          textTransform: 'none',\n          borderRadius: 8,\n        },\n      },\n    },\n    MuiCard: {\n      styleOverrides: {\n        root: {\n          borderRadius: 12,\n          boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n        },\n      },\n    },\n    MuiPaper: {\n      styleOverrides: {\n        root: {\n          borderRadius: 12,\n        },\n      },\n    },\n  },\n});\n\n// Create a client\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      retry: 1,\n      refetchOnWindowFocus: false,\n      staleTime: 5 * 60 * 1000, // 5 minutes\n    },\n  },\n});\n\nfunction App() {\n  const { isAuthenticated, isLoading, refreshAuth } = useAuthStore();\n\n  // Check for existing tokens on app load\n  useEffect(() => {\n    const accessToken = localStorage.getItem('access_token');\n    const refreshToken = localStorage.getItem('refresh_token');\n    \n    if (accessToken && refreshToken && !isAuthenticated) {\n      refreshAuth();\n    }\n  }, [refreshAuth, isAuthenticated]);\n\n  if (isLoading) {\n    return (\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        <Box\n          display=\"flex\"\n          justifyContent=\"center\"\n          alignItems=\"center\"\n          minHeight=\"100vh\"\n        >\n          <LoadingSpinner size={60} />\n        </Box>\n      </ThemeProvider>\n    );\n  }\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        <Router>\n          <Routes>\n            {/* Public routes */}\n            <Route\n              path=\"/login\"\n              element={\n                isAuthenticated ? <Navigate to=\"/dashboard\" replace /> : <LoginPage />\n              }\n            />\n\n            {/* Protected routes */}\n            <Route\n              path=\"/\"\n              element={\n                <ProtectedRoute>\n                  <Layout />\n                </ProtectedRoute>\n              }\n            >\n              <Route index element={<Navigate to=\"/dashboard\" replace />} />\n              <Route path=\"dashboard\" element={<DashboardPage />} />\n              <Route path=\"modules\" element={<ModulesPage />} />\n              <Route path=\"analysis\" element={<AnalysisPage />} />\n              <Route path=\"alerts\" element={<AlertsPage />} />\n              <Route path=\"settings\" element={<SettingsPage />} />\n              <Route path=\"admin\" element={<AdminPage />} />\n            </Route>\n\n            {/* 404 route */}\n            <Route path=\"*\" element={<NotFoundPage />} />\n          </Routes>\n        </Router>\n\n        {/* Toast notifications */}\n        <Toaster\n          position=\"top-right\"\n          toastOptions={{\n            duration: 4000,\n            style: {\n              background: '#363636',\n              color: '#fff',\n            },\n            success: {\n              duration: 3000,\n              iconTheme: {\n                primary: '#4caf50',\n                secondary: '#fff',\n              },\n            },\n            error: {\n              duration: 5000,\n              iconTheme: {\n                primary: '#f44336',\n                secondary: '#fff',\n              },\n            },\n          }}\n        />\n      </ThemeProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}